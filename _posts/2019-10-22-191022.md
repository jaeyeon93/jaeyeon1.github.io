---
layout: post
title: 2019-10-22 TIL
---

### 오늘의 배운점

- 베타버전이 배포가 되었다. nginx를 설정하고, nginx안에다가 index.html을 넣고, versioning된 스크립트 및 app.jsx링크를 넣었다. 처음에는 app.jsx가 로드가 안되서 문제가 있었는데, 이 부분은 docker에서 version.sh를 실행하면 index.html에 맞게 넣어주고, ci에서 한번 더 실행시키면 그에 맞춰서 s3에 업로드를 해줬다. 이 부분은 어찌어찌 해결이 되었다.
- 다음이슈는 서버와의 통신이 안됬다. 나의 경우 nginx에서 서버에 요청을 보내는 url이 localhost가 기본인줄 알았다. 하지만 유저의 입장에서 app.jsx를 다운받아서 nginx로 요청을 보내줘야됬다. 그 부분을 잘 몰랐다.
- 배포를 하면서 복잡한 서버 아키텍처 구조에 대해서 학습을 하게된다. network, ci/cd, docker, ecs, ecr 등 많은 개념을 계속해서 찾아봐야됬고 특히 코드의 문제가 아닌 설정과 네트워크 포트 등의 문제로 접속이 안되는 부분이 많았다. 우여곡절끝에 잘 배포가 되어서 감사.
